{%- macro all(pages, collections) -%}
  {%- if pages | length > 0 -%}
    <ul>
      {%- for page in pages | byDate -%}
        <li>
          {%- if page.data.draft -%}
            <strong> [draft] </strong>
          {%- elif page.data.progress -%}
            {% set progress = page.data.status.progress[page.data.progress] %}
            <span> {{ progress.icon or page.data.progress }} </span>
          {%- endif -%}

          <a href="{{ page.url }}">
            {{- page.data.title -}}
          </a>

          {%- set date = collections[page.data.index] | latest
            if page.data.index
            else page | getDate
          -%}
          <time datetime="{{ date.toISOString() }}">
            â€“ updated
            {{ date.toLocaleString('en-US', {'dateStyle': 'medium'}) }}
          </time>
        </li>
      {%- endfor -%}
    </ul>
  {%- endif -%}
{%- endmacro -%}
